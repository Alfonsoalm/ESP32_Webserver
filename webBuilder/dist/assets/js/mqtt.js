"use strict";import{ApiService,SweetAlert,btnSend,createBreadCrumb,createInputType,createSelectType,createSwitch,headerIconsStatus,alertMsg,formDisable}from"./scripts.js";import{mqttMainInput}from"./template.js";async function iniciarMqtt(){document.title="MQTT | ESP32 Admin Tool v3",createBreadCrumb("Configuración del MQTT","Conexiones","MQTT");const resp=await new ApiService("connection/mqtt").getApiData(),processSendData=(console.log(resp),headerIconsStatus(resp.wifiStatus,resp.rssiStatus,resp.mqttStatus),mqttMainInput.forEach((inputValue,index)=>{inputValue.inputId===Object.keys(resp.mqtt)[index]&&(inputValue.value=resp.mqtt[inputValue.inputId])}),mqttMainInput.forEach(input=>{input.switch?createSwitch(input.parentId,input.inputId,input.type,input.label1,input.label2,input.value,input.classe):input.switch||"select"!==input.type?createInputType(input.parentId,input.inputId,input.type,input.label1,input.label2,input.value,input.classe):createSelectType(input.parentId,input.inputId,input.type,input.label1,input.label2,input.option,input.value,input.classe)}),document.querySelector("#btnSendMqtt").appendChild(new btnSend("primary","Guardar").btnSendSettings()),document.querySelector("#btnSendMqttMsg").appendChild(new btnSend("secondary","Guardar").btnSendSettings()),document.querySelectorAll(".formSend").forEach(formulario=>{formulario.addEventListener("submit",event=>{event.preventDefault(),processSendData()})}),()=>{var mqtt=document.querySelectorAll(".mqtt");let data={mqtt_enable:"",mqtt_server:"",mqtt_port:"",mqtt_retain:"",mqtt_qos:"",mqtt_id:"",mqtt_user:"",mqtt_password:"",mqtt_clean_sessions:"",mqtt_time_send:"",mqtt_time_interval:"",mqtt_status_send:""};mqtt.forEach((inputValue,index)=>{inputValue.id===Object.keys(data)[index]&&(data[inputValue.id]="checkbox"===inputValue.type?inputValue.checked:inputValue.value)}),SweetAlert("¿Desea guardar?","La configuración del Mqtt","question","connection/mqtt",data)});localStorage.getItem("save")&&alertMsg("danger","¡Se han realizado cambios en la configuración, es necesario reiniciar el equipo!"),document.querySelector("#mqtt_enable").checked?formDisable("mq",!1):formDisable("mq",!0)}export{iniciarMqtt};