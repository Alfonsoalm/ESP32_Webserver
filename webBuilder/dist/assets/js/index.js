"use strict";import{ApiService,createBreadCrumb,createCard,createCardRelays,createCardTable,createProgressBar,headerIconsStatus,alertMsg}from"./scripts.js";let index={};async function iniciarIndex(){document.title="HOME | ESP32 Admin Tool v3",createBreadCrumb("Dashboard","Información","Dashboard");var total,resp=await new ApiService("index").getApiData();index=resp,createCard("#serialCard","sales-card","Serial","cpu","serial",index.serial,"Número de serie del equipo"),createCard("#deviceCard","revenue-card","Dispositivo","info-circle","device",index.device,"Identificación del dispositivo"),createCard("#rebootsCard","customers-card","Reinicios","arrow-clockwise","reboots",index.reboots,"Conteo de reinicios"),createCard("#cardTimeActive","customers-card","Tiempo Activo","clock-history","activeTime",index.activeTime,"Tiempo de actividad (D:H:M:S)"),createCardTable("#wirelessCard",!0,"WiFi","esp-wifi","Configurar","Inalámbrico"," | Conexión","wifiTable",index.wifi),createCardTable("#brokerCard",!0,"MQTT","esp-mqtt","Configurar","Broker MQTT"," | Conexión","brokerTable",index.mqtt),createCardRelays("#relaysCard",index.relays),createCardTable("#infoCard",!1,"","","","Información General"," | Dispositivo","infoTable",index.info);createProgressBar("#liWiFi","bg-secondary","wifiQuality","wifiQualitySpan",index.wifiQuality),createProgressBar("#liSpiffs","bg-primary","spiffsUsed","spiffsUsedSpan",(resp=parseInt(index.spiffsUsed),total=parseInt(index.info.SPIFFS_SIZE_KB),Math.round(100*resp/total*100)/100)),createProgressBar("#liRam","bg-success","ramAvailable","ramAvailableSpan",(()=>{var disponible=parseInt(index.ramAvailable),total=parseInt(index.info.RAM_SIZE_KB);return Math.round(100*disponible/total*100)/100})()),createCard("#tempCard","revenue-card","Temperatura del CPU","thermometer-half","cpuTemp",index.cpuTemp,"Temperatura iterna (°C)"),headerIconsStatus(index.wifiStatus,index.rssiStatus,index.mqttStatus),localStorage.getItem("save")&&alertMsg("danger","¡Se han realizado cambios en la configuración, es necesario reiniciar el equipo!")}export{iniciarIndex};